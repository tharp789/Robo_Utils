import numpy as np
from general_utils.transforms import rot2quat

imu_to_cam0 = np.array([[-0.00729687, -0.99951677, -0.03021566, -0.16152484],
[0.99990183, -0.00765447, 0.01173613, 0.26446004],
[-0.01196174, -0.03012706, 0.9994745, -0.05705898],
[0., 0., 0., 1., ],])

imu_to_cam1 = np.array([[-0.01209019, -0.99985566, -0.01193658, -0.16276387],
[-0.99981866, 0.01226367, -0.01456847, 0.06919622],
[0.01471276, 0.01175828, -0.99982262, -0.05764963],
[ 0., 0., 0., 1., ]])

imu_to_cam2 = np.array([[ 0.00938123, 0.99931381, 0.03583164, 0.00172794],
[0.99980599, -0.00999445, 0.01697335, 0.26404165],
[0.01731982, 0.03566546, -0.99921369, -0.05893668],
[0., 0., 0., 1., ]])

imu_to_cam3 = np.array([[-0.00916182, -0.99995443, -0.00268222, 0.15789543],
[-0.99976009, 0.00921335, -0.01987138, 0.06945632],
[0.01989518, 0.00249952, -0.99979895, -0.05652413],
[0., 0., 0., 1., ]])

imu_to_cam4 = np.array([[ 0.00363091, -0.99873307, -0.05019027, 0.16217116],
[0.99999293, 0.00357704, 0.00116315, 0.2624869, ],
[-0.00098214, -0.05019414, 0.998739, -0.05483937],
[0., 0., 0., 1., ]])

imu_to_cam5 = np.array([[ 0.01210629, 0.99989824, 0.00754658, 0.00190053],
[-0.99977352, 0.0122362, -0.01741207, 0.06984238],
[-0.01750264, -0.00733407, 0.99981992, -0.05940779],
[0., 0., 0., 1., ]])


transform_list = [imu_to_cam0, imu_to_cam1, imu_to_cam2, imu_to_cam3, imu_to_cam4, imu_to_cam5]

with open('extrinsics.txt', 'w') as f:
    for i in range(len(transform_list)):
        quat = rot2quat(transform_list[i][:3, :3])
        t = transform_list[i][:3, 3]
        f.write(f'cam{i}:\n')
        f.write(f'  q: [{quat[0]}, {quat[1]}, {quat[2]}, {quat[3]}]\n')
        f.write(f'  t: [{t[0]}, {t[1]}, {t[2]}]\n')